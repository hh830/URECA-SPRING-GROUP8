<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>상품 목록</title>
  <!-- Bootstrap CSS 추가 -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
  <h1 class="text-center mb-4">Product List</h1>
  <div id="productContainer" class="row"></div>
  <div class="text-center mt-4">
    <button class="btn btn-secondary" onclick="viewMain()">메인 페이지</button>
  </div>
</div>

<!-- Ensure your script tag is here -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    fetch('/product/list')
            .then(response => response.json())
            .then(products => {
              const productContainer = document.getElementById('productContainer');
              products.forEach(product => {
                const productElement = document.createElement('div');
                productElement.className = 'col-md-4 mb-4';
                productElement.innerHTML = `
                  <div class="card">
                    <div class="card-body">
                      <p>${product.name} - $${product.price.toFixed(2)}</p>
                      <button class="btn btn-primary" onclick="viewProductDetail(${product.id})">상세 보기</button>
                    </div>
                  </div>
                `;
                productContainer.appendChild(productElement);
              });
            })
            .catch(error => console.error('fetch 오류:', error));
  });

  function viewProductDetail(productId) {
    // 상세 페이지로 이동
    window.location.href = `/product_details.html?productId=${productId}`;
  }

  function viewMain() {
    window.location.href = `/`;
  }
</script>
<!-- Bootstrap JS, Popper.js, jQuery 추가 -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
