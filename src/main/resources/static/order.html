<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>주문 내역</title>
  <!-- Bootstrap CSS 추가 -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
  <h1 class="text-center mb-4">Order List</h1>
  <table class="table table-striped table-bordered" id="orderTable">
    <thead class="thead-dark">
    <tr>
      <th>Order ID</th>
      <th>Member Name</th>
      <th>Product Name</th>
      <th>Quantity</th>
      <th>Order Date</th>
    </tr>
    </thead>
    <tbody>
    <!-- 서버에서 가져온 데이터로 동적으로 채워질 부분 -->
    </tbody>
  </table>
  <div class="text-center">
    <button class="btn btn-primary mr-2" onclick="viewProduct()">상품 페이지</button>
    <button class="btn btn-secondary" onclick="viewMain()">메인 페이지</button>
  </div>
</div>

<script>
  window.onload = function() {
    const memberId = 1; // 예시로 사용된 회원 ID
    fetch(`/orders/list?member=${memberId}`)
            .then(response => response.json())
            .then(data => {
              const tbody = document.getElementById('orderTable').getElementsByTagName('tbody')[0];
              data.forEach(order => {
                const row = tbody.insertRow();
                const cellOrderId = row.insertCell(0);
                const cellMemberName = row.insertCell(1);
                const cellProductName = row.insertCell(2);
                const cellQuantity = row.insertCell(3);
                const cellOrderDate = row.insertCell(4);

                cellOrderId.textContent = order.id;
                cellMemberName.textContent = order.memberName;
                cellProductName.textContent = order.productName;
                cellQuantity.textContent = order.orderQuantity;
                cellOrderDate.textContent = order.orderDate;
              });
            })
            .catch(error => console.error('주문 fetch 오류:', error));
  };

  function viewMain() {
    window.location.href = `/index.html`;
  }

  function viewProduct() {
    window.location.href = `/product.html`;
  }
</script>
<!-- Bootstrap JS, Popper.js, jQuery 추가 -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
